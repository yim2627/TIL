# TIL (Today I Learned)

2021.12.24(Fri)

# 학습 내용

## Closure

참조 타입이 아닌 값 타입은 mutating reference 캡처를 허용하지 않는다. 

> Escaping closure captures mutating 'self' parameter  
해당 에러 발생

## Race Condition

Thread safe 하지않은 타입에서 발생한다.

Thread safe 하다는 것은 어떤 자원에 여러 스레드가 동시에 접근하여도 프로그램의 실행에 문제가 없다는 것이다.

Race Condition은 특정 공유 자원에 여러 스레드가 동시에 접근하며 자원을 사용하기 위해 경쟁하는 것을 말한다.

특정 배열이 있다고 가정해보면 여러 스레드가 동시에 접근하여 배열 요소중 첫번째 요소를 꺼낸다고 생각해보자

하나의 스레드가 이미 첫번째 요소를 꺼내갔는데, 동시에 접근한 다른 하나의 스레드도 첫번째 요소를 또 꺼내가는 것이다. 

이는 절대 발생하면 안되는.. 것 이겠지

위 같은 상황을 방지하는 방법은 대표적으로 직렬 큐를 이용하여 일을 순서대로 하나씩 처리해주거나, semaphore를 활용하는 방법이 있다.

semaphore를 활용하는 방법은 특정 공유자원에 접근할 수 있는 스레드의 최대 갯수를 제한하는 것이다.

